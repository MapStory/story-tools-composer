<div ng-controller="frameController">
<section>
    <h2 class="section-title float-left">Create StoryFrame</h2>
    <br/>
    <p class="clearfix" id="storyDescription">
        A StoryFrame defines the area of the map a viewer of your story will see.
        Set the default StoryFrame below, or create additional StoryFrames to
        override the part of the map your viewers will see for this chapter.
    </p>
</section>

<div id="createdStoryframes" ng-show="frameSettings">
    <h2 class="section-title float-left clearfix" ng-if="frameSettings.length">Created Storyframes</h2>
    <div class="clearfix" ng-repeat="item in frameSettings">
        <div id="titleBar" ng-show="item.chapter === stateSvc.getChapterIndex()">
            <a ng-click="showDetails = !showDetails" id="storyframeTitle" class="section-title">
                <i class="fa fa-expand"></i> {{ item.title }}
            </a>
            <i class="fa fa-trash" ng-click="deleteStoryframe($index)" uib-tooltip="Delete StoryFrame"></i>
            <i class="fa fa-edit" ng-click="editStoryframe($index)" uib-tooltip="Edit StoryFrame"></i>
        </div>
        <ul class="storyframe-details" ng-show="showDetails">
            <li><strong>Bounding Box:</strong></li>
            <ol>
                <li>{{ item.bb1[0] | limitTo: 7 }}, {{ item.bb1[1] | limitTo: 7 }}</li>
                <li>{{ item.bb2[0] | limitTo: 7 }}, {{ item.bb2[1] | limitTo: 7 }}</li>
                <li>{{ item.bb3[0] | limitTo: 7 }}, {{ item.bb3[1] | limitTo: 7 }}</li>
                <li>{{ item.bb4[0] | limitTo: 7 }}, {{ item.bb4[1] | limitTo: 7 }}</li>
            </ol>
            <li><strong>Start Date:</strong> {{ item.startDate | date: 'mediumDate' }}</li>
            <li><strong>Start Time:</strong> {{ item.startTime | date: 'h:mma' }}</li>
            <li><strong>End Date:</strong> {{ item.endDate | date: 'mediumDate' }}</li>
            <li><strong>End Time:</strong> {{ item.endTime | date: 'h:mma' }}</li>
        </ul>
    </div>
</div>
<form name="storyFrameDetails" id="storySettings">
    <label>*Title</label>
    <input id="frameTitle" type="text" ng-model="frameSettings.title" aria-label="title" required/>

    <label>*Start Date</label>
    <div>
        <input required id="startDate" type="date" ng-model="frameSettings.startDate" aria-label="start date" required/>
        <span class="fa fa-calendar input-icons"></span>
        <input id="startTime" type="time" ng-model="frameSettings.startTime" aria-label="start time">
        <span class="fa fa-clock-o input-icons"></span>
    </div>

    <label>*End Date</label>
    <div>
        <input id="endDate" type="date" ng-model="frameSettings.endDate" aria-label="end date" required/>
        <span class="fa fa-calendar input-icons"></span>
        <input id="endTime" type="time" ng-model="frameSettings.endTime" aria-label="end time">
        <span class="fa fa-clock-o input-icons"></span>
    </div>

    <div id="setPlacement">
        <button class="btn btn-inverse" ng-click="drawBoundingBox()" uib-tooltip="Select area for your StoryFrame">
            <i class="fa fa-map"></i>&nbsp;
            Create Bounding Box
        </button>
    </div>
    <hr/>

    <div class="alert alert-danger missingFieldMsg" ng-show="bbDefined == false">
        <p>Please create a bounding box for your StoryFrame.</p>
    </div>

    <div class="alert alert-danger missingFieldMsg" ng-show="showOverlapMsg" class="missingFieldMsg">
        <p>You have overlapping StoryFrames. Please adjust your dates:</p>
        <p>{{ frameSettings.startDate | date: 'mediumDate' }} -  {{ frameSettings.endDate | date: 'mediumDate'}}</p>
    </div>

    <button class="btn btn-inverse" ng-class="{'disabled': disableButton}" ng-click="checkBBDefined(frameSettings)">Save</button>
    <button class="btn btn-inverse" ng-show="disableButton" ng-click="updateStoryframe(frameSettings, $index)">Update</button>
    <button class="btn btn-inverse" type="reset" ng-click="clearBoundingBox()">Reset</button>
</form>
</section>
</div>